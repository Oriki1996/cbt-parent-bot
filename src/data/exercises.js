// ספריית תרגילי CBT להורים ומתבגרים

export const cbtExercises = {
  'thought_record': {
    id: 'thought_record',
    title: 'יומן מחשבות',
    shortDescription: 'כלי לזיהוי ואתגור מחשבות אוטומטיות',
    longDescription: `יומן מחשבות הוא אחד הכלים המרכזיים בטיפול קוגניטיבי-התנהגותי (CBT). 
    התרגיל מאפשר לזהות מחשבות אוטומטיות שעולות במצבים מאתגרים, לבחון אותן באופן ביקורתי, 
    ולפתח מחשבות מאוזנות יותר. כהורה, תוכל/י להשתמש בכלי זה כדי להתמודד עם מחשבות שליליות 
    שעולות בהקשר של הורות למתבגר/ת.`,
    timeRequired: '10-15 דקות',
    difficulty: 'בינונית',
    materials: ['דף יומן מחשבות', 'עט'],
    instructions: [
      'זהה מצב שגרם לך לתחושה רגשית חזקה כשליליית (כעס, תסכול, עצב, חרדה) בהקשר של המתבגר/ת שלך.',
      'כתוב את המצב בקצרה - מה קרה, מי היה מעורב, מתי והיכן.',
      'רשום את הרגש/ות שחווית באותו רגע ודרג את עוצמתם (0-100%).',
      'זהה את המחשבות האוטומטיות שעלו באותו רגע - מה עבר לך בראש?',
      'בחן ראיות שתומכות במחשבות אלו.',
      'בחן ראיות שסותרות או מאתגרות את המחשבות הללו.',
      'פתח מחשבה מאוזנת יותר, שלוקחת בחשבון את כל הראיות.',
      'בדוק איך הרגש השתנה לאחר ניסוח המחשבה המאוזנת.'
    ],
    template: {
      columns: [
        { title: 'מצב', description: 'מה קרה? מי היה מעורב? מתי? היכן?' },
        { title: 'רגש/ות', description: 'מה הרגשת? באיזו עוצמה? (0-100%)' },
        { title: 'מחשבות אוטומטיות', description: 'מה עבר לך בראש באותו רגע?' },
        { title: 'ראיות תומכות', description: 'מה תומך במחשבה זו?' },
        { title: 'ראיות סותרות', description: 'מה מאתגר את המחשבה זו?' },
        { title: 'מחשבה מאוזנת', description: 'מה היתה דרך מאוזנת יותר לחשוב על המצב?' },
        { title: 'רגש מעודכן', description: 'כיצד אתה מרגיש עכשיו? (0-100%)' }
      ]
    },
    examples: [
      {
        situation: 'בני (15) התעלם ממני כשביקשתי ממנו לסדר את חדרו והמשיך לשחק במחשב.',
        emotions: 'כעס (80%), תסכול (90%), פגיעה (70%)',
        automaticThoughts: 'הוא לא מכבד אותי בכלל. אני לא מצליח/ה כהורה. הוא עושה זאת בכוונה כדי להרגיז אותי.',
        supportingEvidence: 'הוא לא הגיב לבקשה שלי. זו לא הפעם הראשונה שהוא מתעלם ממה שאני מבקש/ת.',
        contradictingEvidence: 'לפעמים הוא כן עוזר כשאני מבקש/ת. כשהייתי חולה, הוא דאג לי מאוד. ייתכן שהוא היה שקוע מאוד במשחק ולא שמע אותי היטב.',
        balancedThought: 'ברגע זה בני לא נענה לבקשה שלי, אבל זה לא אומר שהוא לא מכבד אותי באופן כללי. ייתכן שהוא היה שקוע במשחק ולא התכוון להתעלם ממני.',
        updatedEmotion: 'כעס (40%), תסכול (50%), פגיעה (30%)'
      }
    ],
    tips: [
      'השתמש/י ביומן מחשבות באופן קבוע, אפילו פעם בשבוע.',
      'התמקד/י תחילה במצבים פשוטים יחסית.',
      'חשוב להתייחס למחשבות כהשערות שניתן לבחון.',
      'אפשר גם ללמד את הכלי הזה למתבגר/ת.'
    ]
  },
  
  'communication_practice': {
    id: 'communication_practice',
    title: 'תרגול הקשבה משקפת',
    shortDescription: 'תרגיל לשיפור תקשורת עם המתבגר/ת באמצעות הקשבה משקפת',
    longDescription: `הקשבה משקפת היא טכניקה רבת עוצמה לשיפור התקשורת, במיוחד עם מתבגרים. 
    במקום להגיב מיד, ללמד או לפתור בעיות, הקשבה משקפת מתמקדת בהבנת החוויה של המתבגר/ת 
    ובשיקוף הבנה זו חזרה אליו/ה. כשאנשים מרגישים מובנים, הם יותר פתוחים להקשיב ולשתף פעולה.`,
    timeRequired: '20 דקות לתרגול, 5-10 דקות ליישום',
    difficulty: 'בינונית',
    materials: ['דף הוראות'],
    instructions: [
      '**שלב ההכנה:** קרא/י את העקרונות של הקשבה משקפת.',
      '**שלבי ההקשבה המשקפת:**',
      '1. **הקשב/י באמת** - התמקד/י במה שנאמר, ללא הכנת תשובה.',
      '2. **שקף/שקפי** - אמור/אמרי בחזרה את מה ששמעת, במילים שלך.',
      '3. **וודא/י הבנה** - שאל/י אם הבנת נכון את כוונתם.',
      '**יישום בפועל:** בחר/י מצב יומיומי עם המתבגר/ת ויישם/מי את הטכניקה.',
      '**רפלקציה:** רשום/רשמי איך הלך ומה למדת מהניסיון.'
    ],
    scenarios: [
      {
        scenarioDescription: 'המתבגר/ת אומר/ת: "אתה אף פעם לא סומך עליי!"',
        reflectiveResponse: 'נשמע שאתה מרגיש שאני לא נותן בך מספיק אמון. האם הבנתי נכון?',
        nonReflectiveResponse: 'זה פשוט לא נכון! אני סומך עליך בהרבה דברים.',
        explanation: 'התגובה המשקפת מזהה את הרגש (חוסר אמון) ואת הצורך (להרגיש אמון) מבלי להסכים או לא להסכים עם התוכן.'
      },
      {
        scenarioDescription: 'המתבגר/ת אומר/ת: "המורה הזאת פשוט שונאת אותי."',
        reflectiveResponse: 'נשמע שאתה מרגיש שהמורה מתייחסת אליך באופן לא הוגן. זה בטח מאוד מתסכל.',
        nonReflectiveResponse: 'אני בטוח/ה שהיא לא שונאת אותך. אולי עשית משהו שהרגיז אותה?',
        explanation: 'התגובה המשקפת מתמקדת בחוויה הרגשית מבלי לנסות לשנות אותה או להפריך אותה מיד.'
      }
    ],
    tips: [
      'התחל/י עם נושאים פחות טעונים רגשית.',
      'זכור/זכרי שהמטרה היא להבין, לא להסכים או לא להסכים.',
      'אם המתבגר/ת מתרגז/ת יותר, ייתכן שהטון שלך נשמע לא אותנטי.',
      'התמד/י! זו מיומנות שמשתפרת עם הזמן ותרגול.'
    ]
  },
  
  'progressive_muscle_relaxation': {
    id: 'progressive_muscle_relaxation',
    title: 'הרפיית שרירים הדרגתית',
    shortDescription: 'טכניקת הרגעה פיזית ומנטלית לשליטה במתח',
    longDescription: `הרפיית שרירים הדרגתית היא טכניקה פשוטה אך יעילה להפחתת מתח פיזי ונפשי. 
    היא מבוססת על כיווץ והרפיה מכוונים של קבוצות שרירים, מה שמסייע להפחית חרדה, 
    לשפר שינה ולהגביר מודעות גופנית. טכניקה זו יעילה הן להורים והן למתבגרים.`,
    timeRequired: '10-20 דקות',
    difficulty: 'קלה',
    materials: ['מקום שקט', 'כיסא או מיטה נוחים'],
    instructions: [
      'מצא/י מקום שקט ונוח לישיבה או שכיבה.',
      'נשום/נשמי עמוק כמה פעמים.',
      'התחל/י מכפות הרגליים - כווץ/י חזק למשך 5 שניות, ואז הרפה/י.',
      'התקדם/י בהדרגה: רגליים, בטן, כתפיים, זרועות, פנים.',
      'שים/י לב להבדל בין התחושה של מתח לבין הרפיה.',
      'בסיום, שהה/שהי כמה דקות במצב של רגיעה מלאה.'
    ],
    tips: [
      'תרגל/י באופן קבוע לתוצאות טובות יותר.',
      'אפשר לעשות גרסה מקוצרת של 5 דקות.',
      'מתאים גם לפני שינה.',
      'אפשר ללמד את הטכניקה גם למתבגר/ת.'
    ]
  },
  
  'emotional_awareness': {
    id: 'emotional_awareness',
    title: 'מודעות רגשית',
    shortDescription: 'פיתוח היכולת לזהות, להבין ולווסת רגשות',
    longDescription: `מודעות רגשית היא הבסיס לאינטליגנציה רגשית ולתקשורת בריאה. 
    תרגיל זה מסייע הן להורים והן למתבגרים לפתח יכולת טובה יותר לזהות, להבין ולווסת רגשות, 
    מה שמוביל ליחסים בריאים יותר ולהתמודדות טובה יותר עם אתגרים.`,
    timeRequired: '15-20 דקות',
    difficulty: 'בינונית',
    materials: ['דף מעקב רגשות', 'עט'],
    instructions: [
      'שלוש פעמים ביום, עצור/עצרי ושאל/שאלי את עצמך: "מה אני מרגיש/ה עכשיו?"',
      'זהה/זהי את הרגש הדומיננטי ותן/תני לו שם.',
      'דרג/י את עוצמת הרגש מ-1 עד 10.',
      'נסה/נסי לזהות מה גרם לרגש הזה.',
      'שאל/שאלי את עצמך: "מה הרגש הזה מנסה לספר לי?"',
      'בחר/בחרי פעולה מתאימה בהתבסס על המידע הרגשי.'
    ],
    tips: [
      'השתמש/י באפליקציית תזכורות או שעון מעורר.',
      'זכור/זכרי שאין רגשות "טובים" או "רעים" - יש רגשות מועילים ופחות מועילים.',
      'שתף/שתפי את הטכניקה עם המתבגר/ת.',
      'התמד/י - זו מיומנות שמשתפרת עם הזמן.'
    ]
  },
  
  'problem_solving': {
    id: 'problem_solving',
    title: 'פתרון בעיות בשיתוף פעולה',
    shortDescription: 'מודל מובנה לפתרון בעיות בשיתוף פעולה בין הורים למתבגרים',
    longDescription: `פתרון בעיות בשיתוף פעולה הוא מודל יעיל לעבודה עם מתבגרים על אתגרים 
    והתמודדויות. בניגוד לגישה סמכותית, מודל זה מערב את המתבגר/ת בתהליך ומעודד פיתוח 
    מיומנויות חשיבה ביקורתית, אחריות אישית ופתרון קונפליקטים.`,
    timeRequired: '30-45 דקות',
    difficulty: 'גבוהה',
    materials: ['דף עבודה', 'עט'],
    instructions: [
      '**שלב 1: הגדרת הבעיה** - הגדירו יחד מה הבעיה בדיוק.',
      '**שלב 2: חשיבה על פתרונות** - רשמו כמה שיותר פתרונות, בלי לבקר.',
      '**שלב 3: הערכת פתרונות** - עברו על כל פתרון ודונו ביתרונות ובחסרונות.',
      '**שלב 4: בחירת פתרון** - בחרו יחד את הפתרון הטוב ביותר.',
      '**שלב 5: יישום** - תכננו איך לבצע את הפתרון.',
      '**שלב 6: הערכה** - בדקו אחרי זמן אם הפתרון עבד.'
    ],
    tips: [
      'וודא/י שהמתבגר/ת מרגיש/ה שותף/ה שווה בתהליך.',
      'אל תמהר/תמהרי לפתרון - תן/תני זמן לכל שלב.',
      'שמור/שמרי על אווירה חיובית וללא שיפוטיות.',
      'אם לא מוצאים פתרון, אפשר לחזור לשלב קודם.'
    ]
  }
};

// פונקציה למציאת תרגיל על פי מזהה
export function findExerciseById(id) {
  return cbtExercises[id] || null;
}

// פונקציה להמלצה על תרגילים מתאימים
export function recommendExercises(topic, userContext = {}) {
  const recommendations = [];
  
  switch (topic.toLowerCase()) {
    case 'communication':
    case 'תקשורת':
      recommendations.push(
        cbtExercises.communication_practice,
        cbtExercises.emotional_awareness
      );
      break;
      
    case 'negative_thoughts':
    case 'מחשבות שליליות':
      recommendations.push(
        cbtExercises.thought_record,
        cbtExercises.progressive_muscle_relaxation
      );
      break;
      
    case 'stress':
    case 'מתח':
      recommendations.push(
        cbtExercises.progressive_muscle_relaxation,
        cbtExercises.emotional_awareness
      );
      break;
      
    default:
      recommendations.push(
        cbtExercises.communication_practice,
        cbtExercises.thought_record
      );
  }
  
  return recommendations.filter(Boolean);
}